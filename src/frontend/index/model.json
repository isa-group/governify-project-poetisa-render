{
    "id": "ANS-POETISA",
    "version": "1.0",
    "type": "agreement",
    "context": {
        "iAgree": "2.0",
        "provider": "https://www.isotrol.com/",
        "consumer": "http://www.juntadeandalucia.es/",
        "validity": {
            "timeZone": "Europe/Madrid",
            "initial": "2018-05-01T00:00:00.000Z"
        },
        "definitions": {
            "schemas": {
                "BillingDiscount": {
                    "description": "Percentage to be discounted at the next monthly bill",
                    "type": "double",
                    "unit": "%"
                }
            },
            "scopes": {
                "node": {
                    "name": "Node",
                    "description": "identifier for a node in the platform",
                    "type": "string"
                },
                "impact": {
                    "name": "Impact",
                    "description": "the impact of the node on the platform",
                    "type": "string"
                }
            }
        },
        "infrastructure": {
            "designer": "http://designer.governify.io",
            "billing": "http://pricing.governify.io/billing"
        }
    },
    "terms": {
        "pricing": {
            "currency": "EUR",
            "billing": {
                "period": "monthly",
                "initial": "2018-04-28T10:35:36.000Z",
                "rewards": [{
                    "over": {
                        "BillingDiscount": {
                            "$ref": "#/context/definitions/schemas/BillingDiscount"
                        }
                    },
                    "aggregatedBy": "sum",
                    "of": [{
                            "value": "10",
                            "condition": "CMM < 30"
                        },
                        {
                            "value": "10",
                            "condition": "CMM < 20"
                        },
                        {
                            "value": "5",
                            "condition": "CMM < 15"
                        },
                        {
                            "value": "10",
                            "condition": "CCN < 1"
                        },
                        {
                            "value": "10",
                            "condition": "CCN < 0.5"
                        },
                        {
                            "value": "5",
                            "condition": "CCN < 0.25"
                        },
                        {
                            "value": "10",
                            "condition": "EON < 2"
                        },
                        {
                            "value": "10",
                            "condition": "EON < 1"
                        },
                        {
                            "value": "5",
                            "condition": "EON < 0.5"
                        }
                    ]
                }]
            }
        },
        "metrics": {
            "CMM": {
                "schema": {
                    "description": "Average memory consumption",
                    "type": "double",
                    "minimum": 0,
                    "maximum": 100,
                    "unit": "GB"
                },
                "computer": "http://10.1.1.202/api/v1/CMM"
            },
            "CCN": {
                "schema": {
                    "description": "CPU load",
                    "type": "double",
                    "minimum": 0,
                    "maximum": 1,
                    "unit": "%"
                },
                "computer": "http://10.1.1.202/api/v1/CCN"
            },
            "EON": {
                "schema": {
                    "description": "Occupied disk space",
                    "type": "double",
                    "minimum": 0,
                    "maximum": 10,
                    "unit": "TB"
                },
                "computer": "http://10.1.1.202/api/v1/EON"
            },
            "PDN": {
                "schema": {
                    "description": "Occupied disk space",
                    "type": "double",
                    "unit": "%"
                },
                "computer": "http://10.1.1.202/api/v1/PDN"
            }
        },
        "guarantees": [{
            "id": "G_PDN",
            "scope": {
                "priority": {
                    "$ref": "#/context/definitions/scopes/impact"
                },
                "node": {
                    "$ref": "#/context/definitions/scopes/node"
                }
            },
            "of": [{
                    "scope": {
                        "node": "k-mysql",
                        "impact": "high"
                    },
                    "objective": "PDN >= 99.00",
                    "window": {
                        "type": "static",
                        "period": "monthly",
                        "initial": "2018-05-01T00:00:00.000Z"
                    }
                },
                {
                    "scope": {
                        "node": "api-metrics, api-translator",
                        "impact": "medium"
                    },
                    "objective": "PDN >= 95.00",
                    "window": {
                        "type": "static",
                        "period": "monthly",
                        "initial": "2018-05-01T00:00:00.000Z"
                    }
                },
                {
                    "scope": {
                        "node": "k-portal",
                        "impact": "low"
                    },
                    "objective": "PDN >= 90.00",
                    "window": {
                        "type": "static",
                        "period": "monthly",
                        "initial": "2018-05-01T00:00:00.000Z"
                    }
                }
            ]
        }]
    }
}